name: qywx

on:
  push:
    branches:
      - main
  schedule:
    - cron: '15 13 * * *'  # 每天 UTC 13:30，即北京时间 21:30
  workflow_dispatch:       # 手动触发也可以用
jobs:
  send-message:
    runs-on: ubuntu-latest
    steps:
      - name: Send WeChat Message
        env:
          QYWX_WEBHOOK: ${{ secrets.QYWX_WEBHOOK }}
        run: |
          eval "$(curl https://get.x-cmd.com)"

          MESSAGE="@所有人 晚上好🌙，记得到哔哩哔哩平台进行点赞和互动哟～ 
                   1️⃣ 👉 [【💡 npm install 慢？x-cmd 教你一键切换 npmmirror 镜像，前端开发效率飙升！】]
                  (https://www.bilibili.com/video/BV1pMn3zuERA/?share_source=copy_web&vd_source=4e55721827c7e4297e854b22608b40dc)"

          x qywx --cfg webhook='${{ secrets.QYWX_WEBHOOK }}'
          x qywx send --text "$MESSAGE"