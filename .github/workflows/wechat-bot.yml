name: qywx

on:
  # push:
  #   branches:
  #     - main
  schedule:
    - cron: '15 13 * * *'  # æ¯å¤© UTC 13:30ï¼Œå³åŒ—äº¬æ—¶é—´ 21:30
  workflow_dispatch:       # æ‰‹åŠ¨è§¦å‘ä¹Ÿå¯ä»¥ç”¨
jobs:
  send-message:
    runs-on: ubuntu-latest
    steps:
      - name: Send WeChat Message
        env:
          QYWX_WEBHOOK: ${{ secrets.QYWX_WEBHOOK }}
        run: |
          eval "$(curl https://get.x-cmd.com)"

          MESSAGE="@æ‰€æœ‰äºº æ™šä¸Šå¥½ğŸŒ™ï¼Œè®°å¾—åˆ°å“”å“©å“”å“©å¹³å°è¿›è¡Œç‚¹èµå’Œäº’åŠ¨å“Ÿï½ 
                   1ï¸âƒ£ ğŸ‘‰ [ã€ğŸ“¥ asn â€” ç»¼åˆ ASN æŸ¥è¯¢ã€BGP è·¯ç”±è¿½è¸ªã€RPKI éªŒè¯ä¸ IP å£°èª‰åˆ†æçš„ç»ˆç«¯å·¥å…·ï¼ŒåŠ©åŠ›ç½‘ç»œè¿ç»´äººå‘˜è¿›è¡Œç½‘ç»œå½’å±åœ°åˆ†æå’Œ BGP è·¯ç”±è¿½è¸ªã€‘]
                  (https://www.bilibili.com/video/BV1hgndz1EmH/?share_source=copy_web&vd_source=1c09a7c3bd9abce39b9d4a556c1e4410)"

          x qywx --cfg webhook='${{ secrets.QYWX_WEBHOOK }}'
          x qywx send --text "$MESSAGE"